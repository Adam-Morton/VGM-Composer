<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Adam Morton Music</title>
<link rel="stylesheet" href="style.css">
<link rel="icon" href="logo.png" type="image/png">

</head>
<body>
<div class="page-wrapper">
<header id="site-header"></header>

<section class="hero" id="hero"></section>

<section class="welcome" id="welcome"></section>

<section class="projects" id="projects">
  <div class="container">
    <h2>RECENT PROJECTS</h2>
    <div class="project-grid" id="project-grid"></div>
  </div>
</section>

<section class="music-section" id="music-section"></section>
<section class="testimonials" id="testimonials"></section>

<footer id="site-footer"></footer>

<script>
/* Load HTML dynamically into an element */
async function loadHTML(id, url) {
	const res = await fetch(url);
	document.getElementById(id).innerHTML = await res.text();
}

/* Render functions */
function renderHero(hero) {
	const container = document.getElementById('hero');
	container.innerHTML = `
		<div class="container">
			<h1>${hero.title}</h1>
			<p>${hero.subtitle}</p>
			<a href="${hero.cta.link}" class="btn">${hero.cta.text}</a>
		</div>
	`;
}

function renderWelcome(welcome) {
	const container = document.getElementById('welcome');
	container.innerHTML = `
		<div class="container">
			<img src="${welcome.image}" alt="${welcome.title}">
			<div>
				<h2>${welcome.title}</h2>
				${welcome.text.map(p => `<p>${p}</p>`).join('')}
				<a href="${welcome.cta.link}" class="btn">${welcome.cta.text}</a>
			</div>
		</div>
	`;
}

function renderProjects(projects) {
  const grid = document.getElementById('project-grid');
  grid.innerHTML = projects.map(p => {
    const slug = p.slug || p.title.toLowerCase().replace(/\s+/g, '-');
    const image = p.image || `../${slug}/cover.png`;

    return `
      <div class="project" style="text-align:center; margin-bottom:2rem;">
        <a href="/${slug}/" style="text-decoration:none; color:inherit;">
          <img src="${image}" alt="${p.title}" style="max-width:300px; width:100%; border-radius:8px;">
          <h3>${p.title}</h3>
        </a>
      </div>
    `;
  }).join('');
}


function renderMusicPacks(musicPacks) {
	const container = document.getElementById('music-section');
	container.innerHTML = `
		<div class="container">
			${musicPacks.map(m => `
				<div class="music-pack">
					<img src="${m.image}" alt="${m.title}">
					<div>
						<h3>${m.title}</h3>
						<p>${m.description}</p>
						<a href="${m.cta.link}" class="btn">${m.cta.text}</a>
					</div>
				</div>
			`).join('')}
		</div>
	`;
}

function renderTestimonials(testimonials) {
	const container = document.getElementById('testimonials');
	container.innerHTML = `
		<div class="container">
			<h2>TESTIMONIALS</h2>
			${testimonials.map(t => `
				<div class="testimonial">
					<p><strong>${t.author} // ${t.role}</strong></p>
					<p><em>"${t.text}"</em></p>
				</div>
			`).join('')}
		</div>
	`;
}

/* Initialize the page */
async function init() {
	await loadHTML('site-header', '/header.html');
	await loadHTML('site-footer', '/footer.html');

	const res = await fetch('data.json');
	const data = await res.json();

	renderHero(data.hero);
	renderWelcome(data.welcome);
	renderProjects(data.projects);
	renderMusicPacks(data.musicPacks);
	renderTestimonials(data.testimonials);

	// âœ… Attach the hamburger menu logic AFTER header loads
	const toggle = document.querySelector('.menu-toggle');
	const nav = document.querySelector('#site-header nav');
	if (toggle && nav) {
		toggle.addEventListener('click', () => {
			nav.classList.toggle('active');
		});
	}
}

init();
</script>
</div>
</body>
</html>